!function(e,t){function n(){}function r(e){var t=e.indexOf(l);return t>0?u[e.substr(0,t)]+e.substr(t+1):null}function a(e,t,n){if(3===arguments.length){var r=new a(e);r.load(t,n)}else this.name=e?e:"_",this.base=s,this.charset=f}function i(e,t){if(void 0!==t){var n=a._cached[e];a.css(n,t,e)}return a._cached[e]}function o(e,t,n){if("function"!=typeof t){if(!m)return void console.warn("[Cube] dynamic loading css disabled!");a.use(e,function(r){a.css(r,t,e),n&&n(r)})}else a.use(e,t)}function c(e){var t,n,r=a._flag,i={};if(t=r[e]){for(var o=t.length-1;o>=0;o--)n=t[o](e),n!==!1&&(t.splice(o,1),o=t.length,n&&(i[n]=!0));t.length||delete r[e];for(o in i)c(o)}}var s="",u={},l=":",f="utf-8",d=(new Date).getTime(),_=1e4,h=!1,m=!1,g=window.localStorage?window.localStorage.getItem("__cube_debug__"):!1,v=document.getElementsByTagName("head")[0];a.toString=function(){return"Cube:v0.2.3"},a.init=function(e){if(e.base&&"/"!==e.base&&(s=e.base.replace(/\/$/,"")),e.remoteBase)for(var t in e.remoteBase)u[t]=e.remoteBase[t].replace(/\/$/,"");return e.charset&&(f=e.charset),e.version&&(d=e.version),e.debug&&(h=e.debug),e.timeout&&(_=e.timeout),e.enableCss&&(m=e.enableCss),this},a.debug=function(){if(window.localStorage){var e=localStorage.getItem("__cube_debug__");e?localStorage.removeItem("__cube_debug__"):localStorage.setItem("__cube_debug__",!0)}},a.use=function(e,t){if(!e)throw new Error("Cube.use(moduleName) moduleName is undefined!");t||(t=n),-1===e.indexOf(l)&&(0===e.indexOf("./")?e=e.substr(1):"/"!==e[0]&&(e="/"+e));var r=new a;return r.load(e,function(n,r,a){t(a(e))}),this},a.css=function(){},a.remove=function(){},a.register=function(e,t){var n=this._cached[e];n?console.error("module already registered:",e):this._cached[e]=t},a._cached={},a._flag={},a._tree={},a.module=function(e){return this._cached[e]},a.prototype={load:function(e,t){var n=this.name,r=e;"string"==typeof r&&setTimeout(function(){a._flag[e]&&console.error("load script timeout:",e)},_),r?"string"==typeof r&&(r=[r]):r=[];var i=r.length,o=[],c=!1;if(this._load_stack={req:o,total:i,cb:t,count:0},i){for(var s,u=0;i>u;u++)s=r[u],h&&(a._tree[s]||(a._tree[s]={}),a._tree[s][n]=!0,c=this._checkCycle(s)),c||(o.push(s),this._loadScript(s));o.length||this._leafMod(t)}else this._leafMod(t)},_leafMod:function(t){var n,r={exports:{}};t&&(n=t.apply(e,[r,r.exports,i,o,"",""])),n?n.__filename=this.name:n=!0,a._cached[this.name]=n,c(this.name)},_checkCycle:function(e,t){t||(t=[e]);var n,r,i=a._tree[e];if(!i)return!1;for(var o in i){if(-1!==t.indexOf(o))return t.unshift(o),console.warn("[WARNNING]","cycle require : "+t.join(" > ")),!0;if(n=t.slice(0),n.unshift(o),r=this._checkCycle(o,n))return!0}return!1},_loadScript:function(t){function n(t){var n=u._load_stack,r=!1;if(a._cached[t]&&(n.count++,r=u.name),n.total<=n.count){var c,s={exports:{}},l=u.name,f=l.replace(/[^\/]*$/,"");n.cb&&(c=n.cb.apply(e,[s,s.exports,i,o,l,f])),c?c.__filename=u.name:c=!0,a._cached[u.name]=c}return r}var s=a._cached[t],u=this,l=a._flag;if(s)return l=n(t),void(l!==!1&&c(l));if(s===!1)return void l[t].push(n);l[t]||(l[t]=[]),l[t].push(n),a._cached[t]=!1;var f=v.appendChild(document.createElement("script"));f.type="text/javascript",f.async="true",f.charset=this.charset,g&&!/\.\w+\.js$/.test(t)&&(t=t.replace(/\.js$/,".source.js"));var _=[r(t)||this.base+t,"?m=1&",d].join("");f.src=_}},t=t||"Cube",e[t]?console.log("window."+t+' already in using, replace the last "null" param in cube.js'):e[t]=a}(window,null);