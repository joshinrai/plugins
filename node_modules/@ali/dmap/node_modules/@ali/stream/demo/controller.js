'use strict';
var Stream = require('./../stream');
function Controller() {
  var stream = this.stream = new Stream({
    'isDeleteDiff': 0
  });
  stream
  .on('data-cell', function (d) {
    // console.log(d.data);
  })
  .on('data-update', function (d) {
    // console.log(d, 'data-update');
  })
  .on('data-all', function (d) {
    // console.log(d, 'data-all');
  })
  .on('delete-cell', function (d) {
    console.log(d, 'delete');
  })
  .on('range-update', function (d) {
    // console.log(d, 'range-update');
  });
  this.loop();
}

Controller.prototype.loop = function () {
  var ds = {};
  for (var k = 0; k < 10; k++) {
    ds['id_' + parseInt(Math.random() * 10000)] = {
      id: 'id_' + parseInt(Math.random() * 10000),
      value: Math.random() * 10000
    };
  }
  this.stream.write(ds);
  window.requestAnimationFrame(this.loop.bind(this));
};

module.exports = Controller;
