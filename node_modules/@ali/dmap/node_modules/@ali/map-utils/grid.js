/**
 * 生成网格
 */
'use strict';

/**
 * rectGrid 将行政边界生成网格点阵
 * @param {Float} sx 起点x坐标
 * @param {Float} ex 起点y坐标
 * @param {Float} sy 终点x坐标
 * @param {Float} ey 终点y坐标
 * @param {Integer} wN 竖向切分的数目
 * @param {Integer} hN 竖向切分的数目
 * @param {Object} opt 配置
 *  - {Boolean} cross 点的排布是否隔行交错
 * @return {[type]}
 */
function rectGrid(sx, ex, sy, ey, wN, hN, opt) {
  opt = opt || {};
  var arr = [];
  sx = sx || 0.001;
  sy = sy || 0.001;
  ex = ex || 1;
  ey = ey || 1;
  var deltax = ex - sx;
  var deltay = ey - sy;
  wN = wN || 2;
  hN = hN || 2;
  var dx = deltax / wN;
  var dy = deltay / hN;

  var cross = opt.cross||1;
  var xIndex = 0;
  var yFunc = cross ? function(x, xIndex, dx) {
    return x + dx * 0.5 * xIndex % 2;
  } : function (x) {
    return x;
  };

  for (var x = sx; x < ex; x += dx) {
    xIndex++;
    for (var y = sy; y < ey; y += dy) {
      arr.push({
        x: x,
        y: yFunc(y, xIndex, dy),
      });
    }
  }
  return arr;
}

module.exports = {
  'rectGrid':rectGrid
}
