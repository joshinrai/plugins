var THREE = require('three');
var $ = require('jquery');

//生成一个贴图的星空
function Sky(obj) {
  obj = obj || {};
  this.init(obj);
}

Sky.prototype.init = function (obj) {
  var r = obj.r || 1000;
  var three3D = this.three3D = obj.three3D;
  var matType = obj.matType || 'nasa1';

  //开始建立模型
  var geo = this.geo = new THREE.SphereGeometry(r, 60, 60);
  var mat = this.mat = this.genMaterial(matType);
  var mesh = this.mesh = new THREE.Mesh(geo, mat);
  three3D.add(mesh);
};

Sky.prototype.genMaterial = function (matType) {
  var matOpt = {
    side: THREE.BackSide
  };

  if (matType === 'nasa1') {
    matOpt = $.extend(matOpt, {
      map: THREE.ImageUtils.loadTexture('./../mapping/sky/sky.jpg')
    });
  }
  return new THREE.MeshBasicMaterial(matOpt);
};

module.exports = Sky;