 # util.coffee runner管理的工具
 # honeycomb - lib/util.coffee
 # Copyright(c) 2014 Alibaba.com
 # Author: jifeng.zjd <jifeng.zjd@taobao.com>

fs           = require 'fs'
path         = require 'path'
os           = require 'options-stream'

exports.getAppconfig = (dir) ->
  config = undefined
  return undefined if false is fs.existsSync dir
  try
    if true is fs.existsSync(path.join(dir, 'config.yaml'))
      config = os(path.join(dir, 'config.yaml'))
    else if true is fs.existsSync(path.join(dir, 'etc/config.yaml'))
      config = os(path.join(dir, 'etc/config.default.yaml'), path.join(dir, 'etc/config.yaml'))
    else
      config = os(path.join(dir, 'etc/config.default.yaml'))
  catch err
    console.log err
    return undefined
  config

