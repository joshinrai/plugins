var exports=module.exports,_=require("../util"),d3=require("d3"),Com=require("./com"),Opt=require("./config").Options;exports.init=function(t,i){return this._com=new Com,this._data=null,this.options=new Opt,i=i||{},this.options=_.deepMerge(this.options,i),t?(this.el=d3.select(t),this._initArgu(),void this._initEvent()):!1},exports._initBeforeLayout=function(t){var i=this.options,e={left:0,top:0,right:0,bottom:0};for(var s in t){var o=t[s];if(_.has(o,"position")&&"center"!==o.position)switch(o.position){case"bottom":case"top":i.height-=-1===o.height.indexOf("%")?parseInt(o.height):parseInt(o.height)*i.height/100,e[o.position]+=i.height;break;case"left":case"right":i.width-=-1===o.width.indexOf("%")?parseInt(o.width):parseInt(o.width)*i.width/100,e[o.position]+=i.width}}t.series={margin:e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px"}},exports._initArgu=function(){var t=this.options;t.width||(t.width=parseInt(this.el.style("width"))),t.height||(t.height=parseInt(this.el.style("height"))),t.beforeLayout&&this._initBeforeLayout(t.beforeLayout),t.svgWidth=t.width,t.svgHeight=t.height,t.innerWidth=t.svgWidth-t.margin.left-t.margin.right,t.innerHeight=t.svgHeight-t.margin.top-t.margin.bottom},exports.initLayout=function(){var t=this.options;this.svg=this.el&&this.el.append("svg").attr({"class":"svg",width:t.svgWidth,height:t.svgHeight}).append("g").attr({"class":"g-container",transform:"translate("+t.margin.left+","+t.margin.top+")"}).append("g").attr("class","series")};