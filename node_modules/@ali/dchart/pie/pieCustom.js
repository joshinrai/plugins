function Pie(e,t){var i={arc:{innerRadius:0,outerRadius:0,padRadius:0,cornerRadius:0,startAngle:function(e){return e.startAngle},endAngle:function(e){return e.endAngle},padAngle:0}};i=_.deepMerge(i,t),DataV.call(this,e,i)}require("./pie.css");var DataV=require("../datav"),d3=require("d3"),_=require("../util");Pie=DataV.extend(Pie,{renderSeries:function(){var e=this.data();this.svg.classed("pie-chart-g",!0);var t=this.options;t.arc.radius=Math.min(t.innerHeight,t.innerWidth)/2;var i=this.renderCom("arc","arc",this.svg[0][0],t.arc).getArc(),r=d3.layout.pie().sort(null).value(function(e){return e[t.yaxis.key]});this.series=this.svg.selectAll(".pie").data(r(e)).enter().append("g").attr("class","arc").attr("transform","translate("+t.innerWidth/2+","+t.innerHeight/2+")").each(function(e,r){var a=d3.select(this);a.append("path").attr({"class":"pie pie"+(r+1),d:function(e,r){var a=i(e,r),n=a.match(/[-+]?[0-9]*\.?[0-9]+e?[-+]?[0-9]*/g);return n.splice(2,5),"function"==typeof t.customPos&&(n=t.customPos(n)),_.pos2Path(n)}}),a.append("text").attr({"class":"pie-label",transform:function(e){if(!t.xaxis.dr)return"translate("+i.centroid(e)+")";var r=t.xaxis.dr,a=(t.arc.startAngle(e)+t.arc.endAngle(e))/2,n=i.centroid(e),s=n[0],o=n[1];return"translate("+(s+r*Math.sin(a))+", "+(o-r*Math.cos(a))+")"},dy:".35em"}).style("text-anchor","middle").text(function(e){return e.data[t.xaxis.key]})}),t.withInteract&&this.series.on("click",function(e,t){self.emit("series_click",{data:e,index:t,dom:this})}).on("mouseenter",function(e,t){self.emit("series_mouseenter",{data:e,index:t,dom:this})}).on("mouseover",function(e,t){self.emit("series_mouseover",{data:e,index:t,dom:this})}).on("mouseleave",function(e,t){self.emit("series_mouseleave",{data:e,index:t,dom:this})})},updateSeries:function(){}}),module.exports=Pie;