function BarMultiHori(t,e){var i={margin:{top:20,right:20,bottom:20,left:20},x:"y",y:"x",xaxis:{type:"defaults",orient:"bottom",key:"y"},yaxis:{type:"category",orient:"left",key:"x",groupPadding:[.4,0]}};_.deepMerge(i,e,1),DataV.call(this,t,i)}var DataV=require("../datav"),d3=require("d3"),_=require("../util");BarMultiHori=DataV.extend(BarMultiHori,{data:function(t){return t?void(this._data=t.reverse()):this._data},renderSeries:function(){this.svg.classed("bar-chart-g",!0);var t,e,i=this.options,a=this.data(),n=this,r=i.xaxis.key,s=i.yaxis.key,o=[];a.forEach(function(t){o=_.union(o,t[r])});var u=_.max(o);i.xaxis.max=i.xaxis.max||u,t=this.renderXAxis("xaxis",this.svg[0][0],i.xaxis),e=this.renderYAxis("yaxis",this.svg[0][0],i.yaxis);var d=t.getX(),c=e.getX(),h=a[0][r].length,x=((c.rangeBand()-(h-1)*i.padding)/h,e.calGroupStep(i.groupLabel||a[0][r].length));this.series=this.svg.selectAll(".bars").data(a).enter().append("g").attr("class","bars").each(function(){var e=d3.select(this);if(i.withAnimated)for(var a=0;h>a;a++)!function(a){e.append("rect").attr({"class":"bar y"+(a+1),x:function(){return d(t.getMin())},y:function(t){return c(t[s])+x(""+a)},width:0,height:function(){return x.rangeBand()}}).transition().duration(i.animatedTiming).ease(i.animatedEasing).attr({"class":"bar y"+(a+1),x:function(){return d(t.getMin())},y:function(t){return c(t[s])+x(""+a)},width:function(t){return d(t[r][a])},height:function(){return x.rangeBand()}})}(a);else for(var a=0;h>a;a++)e.append("rect").attr({"class":"bar y"+(a+1),x:function(){return d(t.getMin())},y:function(t){return c(t[s])+x(""+a)},width:function(t){return d(t[r][a])},height:function(){return x.rangeBand()}})}),i.withInteract&&this.series.on("click",function(t,e){n.emit("series_click",{data:t,index:e,dom:this})}).on("mouseenter",function(t,e){n.emit("series_mouseenter",{data:t,index:e,dom:this})}).on("mouseover",function(t,e){n.emit("series_mouseover",{data:t,index:e,dom:this})}).on("mouseleave",function(t,e){n.emit("series_mouseleave",{data:t,index:e,dom:this})})},updateSeries:function(){var t=this.options,e=this.data(),i=t.xaxis.key,a=t.yaxis.key,n=this.getComs("axis","xaxis"),r=this.getComs("axis","yaxis"),s=[];e.forEach(function(t){s=_.union(s,t[i])});var o=_.max(s);t.xaxis.max=o,n.update(e,t.xaxis),r.update(e,t.yaxis);var u=n.getX(),d=r.getX(),c=e[0][i].length,h=r.getGroupX();this.series.data(e),this.series.each(function(){for(var e=d3.select(this),r=0;c>r;r++)e.select(".y"+(r+1)).transition().duration(t.animatedTiming).ease(t.animatedEasing).attr({x:function(){return u(n.getMin())},y:function(t){return d(t[a])+h(""+r)},width:function(t){return u(t[i][r])},height:function(){return h.rangeBand()}})})}}),module.exports=BarMultiHori;