function Bubble(e,t){var n={margin:{top:20,right:20,bottom:20,left:20},xaxis:{type:"defaults",orient:"bottom",key:t.x||"x"},yaxis:{type:"defaults",orient:"left",key:t.y||"y"}};n=_.deepMerge(n,t),DataV.call(this,e,n)}require("./scatterplot.css");var DataV=require("../datav"),d3=require("d3"),_=require("../util");Bubble=DataV.extend(Bubble,{renderSeries:function(){this.svg.classed("point-chart-g",!0);var e,t,n=this.options,i=this.data(),r=n.xaxis.key,a=n.yaxis.key;e=this.renderXAxis("xaxis",this.svg[0][0],n.xaxis);var s=e.getX(),u=s.rangeBand?s.rangeBand()/2:n.innerWidth/i.length/2,o=_.max(i,function(e){return e.r}).r/u,c=_.min(i,function(e){return e[a]-e.r/o});c=c[a]-c.r/o;var d=_.max(i,function(e){return e[a]+e.r/o});d=d[a]+d.r/o,n.yaxis.max=d,n.yaxis.min=c,t=this.renderYAxis("yaxis",this.svg[0][0],n.yaxis);var x=t.getX();this.series=this.svg.selectAll(".point.bubble").data(i).enter().append("circle").each(function(){var e=d3.select(this);n.withAnimated?e.attr({"class":"point bubble",cx:function(e){return s(e[r])+(s.rangeBand?s.rangeBand()/2:0)},cy:function(e){return x(e[a])},r:0}).transition().duration(n.animatedTiming).ease(n.animatedEasing).attr({"class":"point bubble",cx:function(e){return s(e[r])+(s.rangeBand?s.rangeBand()/2:0)},cy:function(e){return x(e[a])},r:function(e){return e.r/o}}):e.attr({"class":"point bubble",cx:function(e){return s(e[r])+(s.rangeBand?s.rangeBand()/2:0)},cy:function(e){return x(e[a])},r:function(e){return e.r/o}})}),n.withInteract&&this.series.on("click",function(e,t){self.emit("series_click",{data:e,index:t,dom:this})}).on("mouseenter",function(e,t){self.emit("series_mouseenter",{data:e,index:t,dom:this})}).on("mouseover",function(e,t){self.emit("series_mouseover",{data:e,index:t,dom:this})}).on("mouseleave",function(e,t){self.emit("series_mouseleave",{data:e,index:t,dom:this})})},updateSeries:function(){var e,t,n=this.options,i=this.data(),r=n.xaxis.key,a=n.yaxis.key;e=this.getComs("axis","xaxis"),e.update(i,n.xaxis);var s=e.getX(),u=s.rangeBand?s.rangeBand()/2:n.innerWidth/i.length/2,o=_.max(i,function(e){return e.r}).r/u,c=_.min(i,function(e){return e[a]-e.r/o});c=c[a]-c.r/o;var d=_.max(i,function(e){return e[a]+e.r/o});d=d[a]+d.r/o,n.yaxis.max=d,n.yaxis.min=c,t=this.getComs("axis","yaxis"),t.update(i,n.yaxis);var x=t.getX();this.series.data(i),this.series.each(function(){var e=d3.select(this);e.attr({"class":"point bubble",cx:function(e){return s(e[r])+(s.rangeBand?s.rangeBand()/2:0)},cy:function(e){return x(e[a])},r:function(e){return e.r/o}})})}}),module.exports=Bubble;