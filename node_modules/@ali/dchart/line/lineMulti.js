function LineMulti(e,t){var i={margin:{top:20,right:20,bottom:20,left:20},xaxis:{type:"defaults",orient:"bottom",key:t.x||"x"},yaxis:{type:"defaults",orient:"left",key:t.y||"y"}};i=_.deepMerge(i,t),DataV.call(this,e,i)}require("./line.css");var DataV=require("../datav"),d3=require("d3"),_=require("../util");LineMulti=DataV.extend(LineMulti,{renderSeries:function(){this.svg.classed("line-chart-g",!0);var e,t,i=this.options,a=this.data(),s=this,n=i.xaxis.key,r=i.yaxis.key,o=[];a.forEach(function(e){o=_.union(o,e[r])});var x=_.max(o);i.yaxis.max=x,i.yaxis.min=0,e=this.renderXAxis("xaxis",this.svg[0][0],i.xaxis),t=this.renderYAxis("yaxis",this.svg[0][0],i.yaxis);var u=e.getX(),d=t.getX(),l=a[0][r].length;this.series=this.svg.datum(a).append("g").attr("class","lines").each(function(){for(var e=d3.select(this),t=0;l>t;t++){var a=d3.svg.line().x(function(e){return u(e[n])+("category"===i.xaxis.type?u.rangeBand()/2:0)}).y(function(e){return d(e[r][t])});i.interpolate&&a.interpolate(i.interpolate),e.append("path").attr({"class":"line line"+(t+1),d:a})}}),i.withInteract&&this.series.on("click",function(e,t){s.emit("series_click",{data:e,index:t,dom:this})}).on("mouseenter",function(e,t){s.emit("series_mouseenter",{data:e,index:t,dom:this})}).on("mouseover",function(e,t){s.emit("series_mouseover",{data:e,index:t,dom:this})}).on("mouseleave",function(e,t){s.emit("series_mouseleave",{data:e,index:t,dom:this})})},updateSeries:function(){var e=this.options,t=this._data,i=this.getComs("axis","xaxis"),a=this.getComs("axis","yaxis"),s=e.xaxis.key,n=e.yaxis.key;i.update(t,e.xaxis),a.update(t,e.yaxis);var r=[];t.forEach(function(e){r=_.union(r,e[n])});var o=_.max(r);e.yaxis.max=o,e.yaxis.min=0,i.update(t,e.xaxis),a.update(t,e.yaxis);var x=i.getX(),u=a.getX(),d=t[0][n].length;this.series.datum(t),this.series.each(function(){for(var t=d3.select(this),i=0;d>i;i++){var a=d3.svg.line().x(function(t){return x(t[s])+("category"===e.xaxis.type?x.rangeBand()/2:0)}).y(function(e){return u(e[n][i])});e.interpolate&&a.interpolate(e.interpolate),t.select(".line"+(i+1)).transition().duration(e.animatedTiming).ease(e.animatedEasing).attr({d:a})}})}}),module.exports=LineMulti;