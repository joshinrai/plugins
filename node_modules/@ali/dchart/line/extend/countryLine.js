function CountryLine(t,e){var a={margin:{left:10,top:10,right:40,bottom:30},xaxis:{type:"category",padding:.2,dy:10,orient:"bottom",key:e.x||"x"},yaxis:{min:0,orient:"left",key:e.y||"y"},beforeLayout:{legend:{position:"float",height:"54",width:"84"}},legend:{margin:{left:0,top:0,right:0,bottom:0},type:"vertical",customRender:function(t,e){{var a=e.x,i=e.y;e.height}this.append("circle").attr({"class":"back",cx:a+15,cy:i+14,r:10}),this.append("circle").attr({"class":"front",cx:a+15,cy:i+14,r:3}),this.append("text").attr({"class":"label-text",x:a+30,y:i+20}).text(t)}}};a=_.deepMerge(a,e),DataV.call(this,t,a)}var DataV=require("../lineMulti"),_=require("../../util"),d3=require("d3");CountryLine=DataV.extend(CountryLine,{_beforeRender:function(){var t=this.renderBG("bg",this.svg[0][0]);t.renderGrid(13,6)},_afterRender:function(){DataV.prototype._afterRender.call(this);var t=this.options,e=(this.data(),this.getComs("axis","xaxis")),a=e.getX(),i=this.getComs("axis","yaxis"),r=i.getX(),s=t.xaxis.key,n=t.yaxis.key;this.series.each(function(t){var e=d3.select(this);t.length&&t.forEach(function(t){var i=t[s];t[n].forEach(function(t,s){var n=e.append("g").attr("class","point point"+s);n.append("circle").attr({"class":"back",cx:a(i)+a.rangeBand()/2,cy:r(t),r:10}),n.append("circle").attr({"class":"front",cx:a(i)+a.rangeBand()/2,cy:r(t),r:3})})})});var c=e.selectAll(".tick")[0],l=i.selectAll(".tick")[0];d3.select(c[c.length-1]).select("text").text("年份"),d3.select(l[l.length-1]).select("text").text("贸易额")},_updateAfterRender:function(){var t=this.options,e=(this.data(),this.getComs("axis","xaxis")),a=e.getX(),i=this.getComs("axis","yaxis"),r=i.getX(),s=t.xaxis.key,n=t.yaxis.key;this.series.each(function(t){var e=d3.select(this);t.length&&t.forEach(function(t,i){var c=t[s];t[n].forEach(function(t,s){var n=d3.select(e.selectAll(".point"+s)[0][i]);n.select(".back").attr({cx:a(c)+a.rangeBand()/2,cy:r(t),r:10}),n.select(".front").attr({"class":"front",cx:a(c)+a.rangeBand()/2,cy:r(t),r:3})})})});var c=e.selectAll(".tick")[0],l=i.selectAll(".tick")[0];d3.select(c[c.length-1]).select("text").text("年份"),d3.select(l[l.length-1]).select("text").text("贸易额")}}),module.exports=CountryLine;