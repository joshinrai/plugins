## 组件说明

数据可视化的场景越来越复杂，前端需要流式数据的处理，但流式的传送中，新数据可能和老数据有交叠，我们需要去重，也可能需要累加，有时候我们需要计算历史最大最小值。
stream为解决这些问题设计，stream可以理解成一个数据处理的中间件
首先我们初始化stream:
```js
var stream = new Stream({
isDeleteDiff:true//是否要删除和新数据不一致的老数据。
});
```
每次我们请求服务器，返回一些数据`格式为数组或对象 需要带id`，如下:
`[{id:111,value:22},{id:112,value:2},{id:113,value:42}]`
或者
`{111:{value:11}, 112:{value:2},113:{value:42}}`
我们将这些数据写入stream:
```js
stream.write(data);//data = {111:{value:11}, 112:{value:2},113:{value:42}}
```
此时stream会触发一些事件，其中返回值通常为wrapper 为数据本身:
wrapper的结构为:
`
{
data: data,//数据本身
version: version,//更新的版本id
id: id,//数据本身id
action: data,//是否是新增
}
`
触发的事件举例:
```js
  stream
  .on('update-row', function (d) {
    // 最小粒度的数据（数组或）d为wrapper
  })
  .on('update-data', function (d) {
    // 本次更新产生的数据; d为{id1:wrapper1,id2:wrapper2...}
  })
  .on('all-data', function (d) {
    // 更新后所有的数据; d为{id1:wrapper1,id2:wrapper2...}
  })
  .on('delete-row', function (d) {
    //被删除的数据; d为wrapper
  })
  .on('update-range', function (d) {
    // 最大值和最小值的数据发生变化时候，触发 返回的格式为{min:min,max:max};
  });
```