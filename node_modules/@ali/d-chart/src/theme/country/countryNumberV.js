var DataV = require('../../charts/number/number');
var _ = require('../../util');
var d3 = require('../../libs/d3');

function CountryNumberV(options) {
  this.opt = {
    margin: {left:20, top:20, right:0, bottom:5},
    axis : {
      orient : 'left'
    }
  };
  this.opt = _.extend({}, this.opt, options);
  this.blockWidth = 120;
  this._init(this.opt);
  this._initLayout();
}

DataV.extend(CountryNumberV, {
  _afterRender : function () {

    var bw = this.blockWidth;

    var axis = this._com.getComs('axis');
    var arrX = axis[0].selectAll('.tick')
      .each(function () {
        var that = d3.select(this);
        var pos = that.attr('transform').match(/\d+/g);
        var box = this.getBBox();
        var w = box.width;
        var h = box.height;
        that.attr('transform', 'translate(' + (parseInt(pos[0]) + w) + ', ' + (parseInt(pos[1]) - h - 10) + ')');
      });

  }
});

module.exports = CountryNumberV;