/*
jquery leaflet
 */

var $ = require('jquery');
require('./../layer/iconFont');
var iconFont = L.dmap.iconFont;
var demo = require('./demo');

function Markers2d(container) {
  container = container || $('#map-container');
  var map = this.map = demo(container);
  this.test();
}

Markers2d.prototype.test = function() {
  var latlng, marker, map = this.map;
  for (var k = 0; k < 20; k++) {
    var latlng = L.latLng(33.845998 + 10 * (Math.random() - 0.5), 110.602932 + 10 * (Math.random() - 0.5));
    marker = L.marker(latlng, {
      icon: new iconFont({
        processing: function(div) {
          var delay = 9 * Math.random().toFixed(1);
          $(div).find('i').css({
            'webkitAnimationName': 'rotate-icon',
            'animationName': 'rotate-icon',
            'webkitAnimationDelay': delay + '3s',
            'animationDelay': delay + 's',
            'webkitAnimationDuration': '3s',
            'animationDuration': '3s',
            'animationIterationCount': 'infinite',
            'webkitAnimationIterationCount': 'infinite',
            'animationTimingFunction': 'linear',
            'webkitAnimationTimingFunction': 'linear',
            'webkitTransformOrigin': 'center',
            'transformOrigin': 'center',
          });
        }
      })
    }).addTo(map);
  }
};


module.exports = Markers2d;