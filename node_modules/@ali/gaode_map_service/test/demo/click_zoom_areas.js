var $ = require('jquery');
// DMap.init({
//   fileBase: 'http://daily.s.aliyun.com:8080/res/geo/region_boundary_js/'
// };
// 
var L = require('leaflet');
require('./../core/utils');
var Utils = L.dmap.Utils;
require('./../layer/areas');
var children = L.dmap.children;
var demo = require('./demo');

function colorize(container) {
  var map = demo(container);
  var data = {
    152500: {
      value: 1000
    },
    150900: {
      value: 300
    },
    152900: {
      value: 100
    }
  };

  var vis = children(150000, {
    'mode': 'file',
    'map': map,
    'mouseover': function (e) {//mouseover触发的函数
      var target = e.target;
      target.setStyle({
        'fillOpacity': 0.8,
        'strokeOpacity': 0.8
      });
    },
    'mousedown': function (e) {//mousedown触发的函数 这里为下钻
      var layer = e.target;
      var id = layer.id;
      this.map.fire('click-area', {
        'id': id,
        'layer': layer
      });
      vis.focus(layer);
      vis.select(layer.id);
      vis.render();
    }, //点击后触发的函数
    'clickMap': function () {
      vis.select('2210');
      vis.focusChina();
      vis.render();
    },
    'mouseout': null, //mouseout时触发的函数
    'default': {//默认没有数据的边界数据的样式
      'dashArray': [2, 6],
      'fillColor': 'hsla(210,70%,20%,0.8)',
      'color': 'hsla(210,10%,95%,0.5)',
      'strokeOpacity': 'hsla(210,50%,20%,0.9)',
      'fillOpacity': 0.9,
      'weight': 1
    },
    'visual': {//可视化区域的样式和数据的对应
      'colorizeFill': Utils.singleMapping({
        'h': 30,
        'sFrom': 20,
        'sTo': 100,
        'lFrom': 100,
        'lTo': 50
      })
    }
  });

  vis.data(data, 'value');
  vis.visualize();
}

module.exports = colorize;
